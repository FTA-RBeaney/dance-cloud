import{g as e}from"../../../../virtual/_commonjsHelpers.mjs";import{e as s,a as r,n as a,q as t}from"../../../../runtime.mjs";import{r as n}from"../../../../_/auth.mjs";var c=1e3,i=60*c,u=60*i,o=24*u,m=7*o,l=365.25*o;function plural(e,s,r,a){var t=s>=1.5*r;return Math.round(e/r)+" "+a+(t?"s":"")}const h=e((function(e,s){s=s||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var r=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*l;case"weeks":case"week":case"w":return r*m;case"days":case"day":case"d":return r*o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*u;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return s.long?function(e){var s=Math.abs(e);if(s>=o)return plural(e,s,o,"day");if(s>=u)return plural(e,s,u,"hour");if(s>=i)return plural(e,s,i,"minute");if(s>=c)return plural(e,s,c,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=o)return Math.round(e/o)+"d";if(s>=u)return Math.round(e/u)+"h";if(s>=i)return Math.round(e/i)+"m";if(s>=c)return Math.round(e/c)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))})),f=s((async e=>{await n(e),r("cache");const s=a(e,"key")||"";if(/\.[a-z0-9]{2,5}$/i.test(s)){const e=await t("cache:nitro").getItem(s);if(e)return e}const c=t(`cache:nitro:${s}`),i=await c.getKeys(),u={groups:{},cache:[]};return await Promise.all(i.map((async e=>{if(e.includes(":")){const s=e.split(":")[0];return void(u.groups[s]=(u.groups[s]||0)+1)}const s=await c.getItem(e);if(!s)return;const{value:r,...a}=s,t={key:e,...a,size:JSON.stringify(s).length};try{t.duration=h(a.expires-a.mtime,{long:!0})}catch(e){t.duration="unknown"}u.cache.push(t)}))),u}));export{f as default};
//# sourceMappingURL=_...key_.get.mjs.map
